<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Liket Bid Calculator</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, #0a2520 0%, #0f3830 100%);
      color: #e2e8f0;
      min-height: 100vh;
      padding: 16px;
      display: flex;
      flex-direction: column;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 500px;
      height: 500px;
      background-image: url('logo.png');
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
      pointer-events: none;
      opacity: 0.08;
      z-index: 0;
    }

    header {
      text-align: center;
      padding: 24px 0 32px;
      max-width: 420px;
      margin: 0 auto;
    }

    h1 {
      font-size: 1.85rem;
      font-weight: 700;
      color: #39997D;
      margin-bottom: 8px;
      position: relative;
      z-index: 1;
    }

    .subtitle {
      color: #94a3b8;
      font-size: 0.95rem;
    }

    .container {
      max-width: 420px;
      margin: 0 auto;
      width: 100%;
    }

    .card {
      background: rgba(15, 45, 40, 0.6);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      border: 1px solid rgba(57, 153, 125, 0.2);
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.4);
      position: relative;
      z-index: 1;
    }

    .input-group {
      margin-bottom: 24px;
    }

    label {
      display: block;
      font-size: 0.95rem;
      font-weight: 500;
      margin-bottom: 8px;
      color: #cbd5e1;
    }

    input[type="number"] {
      width: 100%;
      padding: 14px 16px;
      font-size: 1.25rem;
      background: rgba(10, 37, 32, 0.8);
      border: 1.5px solid rgba(57, 153, 125, 0.3);
      border-radius: 10px;
      color: white;
      transition: all 0.2s;
    }

    input[type="number"]:focus {
      outline: none;
      border-color: #39997D;
      box-shadow: 0 0 0 3px rgba(57, 153, 125, 0.25);
    }

    .error-message {
      background: rgba(239, 68, 68, 0.15);
      border-left: 4px solid #ef4444;
      color: #fca5a5;
      padding: 12px 16px;
      border-radius: 8px;
      font-size: 0.9rem;
      margin-bottom: 16px;
      display: none;
    }

    .error-message.show {
      display: block;
      animation: shake 0.4s ease;
    }

    @keyframes shake {

      0%,
      100% {
        transform: translateX(0);
      }

      25% {
        transform: translateX(-8px);
      }

      75% {
        transform: translateX(8px);
      }
    }

    .btn {
      background: linear-gradient(90deg, #2d7a63, #39997D);
      color: white;
      border: none;
      font-size: 1.1rem;
      font-weight: 600;
      padding: 16px;
      border-radius: 12px;
      cursor: pointer;
      width: 100%;
      margin-top: 12px;
      transition: all 0.2s;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(57, 153, 125, 0.4);
    }

    .btn:active {
      transform: translateY(0);
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s;
      z-index: 1000;
    }

    .modal-overlay.active {
      opacity: 1;
      pointer-events: all;
    }

    .modal-content {
      background: linear-gradient(135deg, #0a2520 0%, #0f3830 100%);
      border-radius: 20px;
      width: 100%;
      max-width: 420px;
      max-height: 90vh;
      overflow-y: auto;
      border: 1px solid rgba(57, 153, 125, 0.3);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8);
      transform: scale(0.9);
      transition: transform 0.3s;
    }

    .modal-overlay.active .modal-content {
      transform: scale(1);
    }

    .modal-header {
      background: linear-gradient(90deg, #2d7a63, #39997D);
      padding: 20px;
      text-align: center;
      border-radius: 20px 20px 0 0;
    }

    .modal-header h2 {
      font-size: 1.3rem;
      color: white;
      margin-bottom: 4px;
    }

    .modal-header p {
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.85);
    }

    .modal-body {
      padding: 24px;
    }

    .big-number {
      font-size: 2.8rem;
      font-weight: 800;
      color: #5dc4a8;
      text-align: center;
      margin: 16px 0 8px;
    }

    .big-number-label {
      text-align: center;
      font-size: 1rem;
      color: #94a3b8;
      margin-bottom: 24px;
    }

    .verdict-box {
      padding: 20px;
      border-radius: 12px;
      margin: 20px 0;
      text-align: center;
      border: 2px solid;
      transition: all 0.3s;
    }

    .verdict-box.safe {
      background: rgba(34, 197, 94, 0.1);
      border-color: #22c55e;
    }

    .verdict-box.at-risk {
      background: rgba(239, 68, 68, 0.1);
      border-color: #ef4444;
    }

    .verdict-status {
      font-size: 1.4rem;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .verdict-status.safe {
      color: #22c55e;
    }

    .verdict-status.at-risk {
      color: #ef4444;
    }

    .verdict-message {
      font-size: 0.95rem;
      line-height: 1.6;
      color: #cbd5e1;
    }

    .recommendation {
      background: rgba(45, 122, 99, 0.2);
      border-radius: 12px;
      padding: 16px;
      margin-top: 24px;
      border-left: 4px solid #39997D;
    }

    .recommendation h3 {
      font-size: 0.9rem;
      color: #5dc4a8;
      margin-bottom: 12px;
      font-weight: 600;
    }

    .recommendation ul {
      list-style: none;
    }

    .recommendation li {
      margin: 10px 0;
      font-size: 1rem;
      color: #cbd5e1;
      padding-left: 20px;
      position: relative;
    }

    .recommendation li:before {
      content: "‚Üí";
      position: absolute;
      left: 0;
      color: #39997D;
      font-weight: 700;
    }

    .close-btn {
      background: #334155;
      color: #cbd5e1;
      border: none;
      font-size: 1rem;
      font-weight: 600;
      padding: 14px 24px;
      border-radius: 10px;
      cursor: pointer;
      margin-top: 24px;
      width: 100%;
      transition: all 0.2s;
    }

    .close-btn:hover {
      background: #475569;
    }

    .footer-note {
      text-align: center;
      color: #64748b;
      font-size: 0.85rem;
      margin-top: auto;
      padding: 32px 0 16px;
    }
  </style>
</head>

<body>
  <header>
    <h1>60/40 Bid Defender</h1>
    <div class="subtitle">Calculate your vulnerability window </div>
  </header>

  <div class="container">
    <div class="card">
      <div class="error-message" id="errorMessage"></div>

      <div class="input-group">
        <label for="rate">Your Proposed Rate (Birr/m¬≤)</label>
        <input type="number" id="rate" placeholder="e.g. 52000" min="0" step="1">
      </div>

      <div class="input-group">
        <label for="advance">Your Advance Payment (%)</label>
        <input type="number" id="advance" placeholder="e.g. 75" min="40" max="100" step="1">
      </div>

      <button class="btn" onclick="calculateWinningRate()">Calculate Winning Rate</button>
    </div>
  </div>

  <!-- Result Modal -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal-content">
      <div class="modal-header">
        <h2>‚ö†Ô∏è COMPETITOR SCENARIO: 100% ADVANCE </h2>
        <p>Analysis Results</p>
      </div>
      <div class="modal-body">
        <p> If a competitor offers the maximum advance (100%),they only need to offer:</p>
        <div class="big-number" id="winningRate">--</div>
        <div class="big-number-label">Birr/m¬≤</div>
        <div class="verdict-box" id="verdictBox">
          <div class="verdict-status" id="verdictStatus">VERDICT</div>
          <div class="verdict-message" id="verdictMsg">--</div>
        </div>

        <div class="recommendation">
          <h3>üí° Recommendations</h3>
          <ul>
            <li id="rec1">...</li>
            <li id="rec2">...</li>
          </ul>
        </div>

        <button class="close-btn" onclick="closeModal()">Close</button>
      </div>
    </div>
  </div>

  <script>
    function calculateWinningRate() {
      const rateInput = document.getElementById('rate');
      const advanceInput = document.getElementById('advance');
      const errorMessage = document.getElementById('errorMessage');

      // Clear error message
      errorMessage.classList.remove('show');
      errorMessage.textContent = '';

      // Get values
      const rate = parseFloat(rateInput.value);
      const advance = parseFloat(advanceInput.value);

      // Validation
      if (!rate || rate <= 0) {
        showError('Please enter a valid rate (must be greater than 0)');
        return;
      }

      if (!advance || advance < 40 || advance > 100) {
        showError('Please enter a valid advance percentage (40% - 100%)');
        return;
      }

      // Convert advance percentage to decimal
      const advanceDecimal = advance / 100;

      // Formula: Winning Rate at 100% Advance
      // winningRate = ((0.4 * proposed_advance * proposed_rate + 0.2 * proposed_rate) / 0.6) + 1
      const winningRate = ((0.4 * advanceDecimal * rate + 0.2 * rate) / 0.6) + 1;

      // Determine if bid is safe
      const isSafe = winningRate < rate;

      // Update results
      document.getElementById('winningRate').textContent = Math.round(winningRate).toLocaleString('en-US');

      // Update verdict
      const verdictBox = document.getElementById('verdictBox');
      const verdictStatus = document.getElementById('verdictStatus');
      const verdictMsg = document.getElementById('verdictMsg');

      if (isSafe) {
        verdictBox.classList.remove('at-risk');
        verdictBox.classList.add('safe');
        verdictStatus.classList.remove('at-risk');
        verdictStatus.classList.add('safe');
        verdictStatus.textContent = '‚úì SAFE';
        verdictMsg.textContent = 'Your bid is well-protected against competitors with 100% advance.';
      } else {
        verdictBox.classList.add('at-risk');
        verdictBox.classList.remove('safe');
        verdictStatus.classList.add('at-risk');
        verdictStatus.classList.remove('safe');
        verdictStatus.textContent = '‚ö† AT RISK';
        verdictMsg.textContent = 'A competitor with 100% advance at this rate would beat you.';
      }

      // Generate recommendations
      const rateReduction = Math.round(winningRate * 0.98);
      const advanceIncrease = Math.min(100, Math.ceil(advance + 5));

      document.getElementById('rec1').textContent = 'Reduce your rate to ' + rateReduction.toLocaleString('en-US') + ' Birr/m¬≤';
      document.getElementById('rec2').textContent = 'OR increase your advance to ' + advanceIncrease + '%';

      // Open modal
      openModal();
    }

    function openModal() {
      document.getElementById('modalOverlay').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      document.getElementById('modalOverlay').classList.remove('active');
      document.body.style.overflow = 'auto';
    }

    function showError(message) {
      const errorMessage = document.getElementById('errorMessage');
      errorMessage.textContent = message;
      errorMessage.classList.add('show');
    }

    // Close modal on overlay click
    document.getElementById('modalOverlay').addEventListener('click', function (e) {
      if (e.target === this) closeModal();
    });

    // Allow Enter key to calculate
    document.getElementById('rate').addEventListener('keypress', function (event) {
      if (event.key === 'Enter') calculateWinningRate();
    });

    document.getElementById('advance').addEventListener('keypress', function (event) {
      if (event.key === 'Enter') calculateWinningRate();
    });
  </script>
</body>

</html>